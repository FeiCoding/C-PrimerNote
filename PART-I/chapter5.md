# Chapter 5 语句

## 5.1 简单语句

1. 表达式语句的作用是执行表达式并丢弃掉求值的结果。

    ```c++
    ival + 5; // 一条没什么实际用处的表达式语句
    cout << ival; // 一条有用的表达式语句
    ```

1. 空语句（null statement）只含有一个单独的分号

    ```c++
    while(cin >> s && s != sought){
        ; // 空语句，只是读取输入流，什么也不做
    }
    // 使用空语句是一般需要加上注释，以表示该句有意省略
    ```

1. 一般来说多余的空语句是无害的，但是如果在if或者while的条件后面跟了一个额外的分号就可能完全改变了程序员的初衷。

    ```c++
    while(iter != svec.end()) ; // 此时循环的是一个空语句，导致循环无限下去
        ++iter;
    ```

1. 复合语句（compound statement）是指用花括号括起来的语句和声明的序列。复合语句也被称作块（block）。一个块就是一个作用域，在块中引入的名字只能在块内部以及嵌套在块中的子块里访问。**通常，名字在有限的区域内可见，该区域从名字定义处开始，到名字所在的（最内层）块的结尾为止。**

1. while或for的循环体必须只能包含一条语句，此时我们使用花括号括起来，就可以把语句序列转换成块。此时就可以在块中放入多条语句成为循环的语句。

    ```c++
    while(val <= 10)}{
        sum += val;
        ++val;
    }

    while(val <= 10)}{

    } // 空块，等价于空语句
    ```

## 5.2 语句作用域

1. 可以再if、switch、while和for语句的控制结构内定义变量。定义在控制结构当中的变量只在相应语句的内部可见，一旦语句结束，变量也就超出作用范围了。

    ```c++
    while(int i = get_num())
        cout <<i <<endl;
    i = 0; // 错误，i在循环外部无法访问，i在块外失去作用域
    ```

1. 如果其他代码也要访问控制变量，则变量必须定义在语句的外部。

1. **因为控制结构定义的对象的值马上要由结构本身使用，所以这些变量必须初始化。**

## 5.3 条件语句

1. **为了避免代码混乱不清，以后修改代码时添加语句很容易找到正确的位置，最好在if或者else以及for和while的后面都跟上花括号**

1. 悬垂else（dangling else）：if分支会多于else分支，这个时候某个给定的else应该和最近的尚未匹配的if匹配，从而消除程序的二义性：

    ```c++
    if(grade % 10 >= 3)
        if(grade % 10 > 7)
            lettergrade += '+';

    else
        lettergrade += '-';
        // 虽然此时缩进看似乎else和第一个if匹配
        // 然而实际上是匹配的最近的那个if（第二个）
    ```

1. 如果想避免上述的歧义，可以使用花括号来避免这种情况。

1. 如果switch语句的表达式所有的case都没有匹配上，将直接跳转到switch结构之后的第一条语句。

1. case关键字和他对应的值一起被称为case标签（case label）。case标签必须是整型表达式：

    ```c++
    char ch = getVal();
    int ival = 42;
    switch(ch){
        case 3.15: // 错误，case标签不是一个整数
        case ival: // 错误，case标签不是一个常量
    }
    ```

1. break语句将控制权转移到switch语句外面。

1. 如果某个case分支被匹配上，那么将执行该标签后的所有分支，要想避免执行之后的所有分支，必须在下一个case之前使用break语句来中断。然而，有时候我们会故意省掉break语句，使程序能够连续执行若干个case标签。

1. **一般不要省略case之后的break，如果没写break最好加上注释说清楚程序的逻辑。**

1. 任何两个case标签的值不能相同，否则就会引发错误。另外，default也是一种特殊的case标签。如果没有任何一个case标签可以匹配上switch表达式的值，程序将执行紧跟在default标签后面的语句。

    ```c++
    switch(ch){
        case 1: case 2: case 3: //故意省略break，
                                // 此时所有符合这些case的语句都会执行++count
            ++count;
            break;
        default:
            ++countNone;
            break;
    }
    ```

1. 标签不应该孤零零的出现，它后面必须跟上一条语句或者另外一个case标签。如果switch结构以一个空的default标签作为结束，则该default标签背后必须跟上一条空语句或者空块。

    ```c++
        int b = 4;
        switch(b){
            case 3:
                cout << "b is 3" << endl;
                break;
            default: ; // default 必须以空语句结尾
        }
    ```

1. 